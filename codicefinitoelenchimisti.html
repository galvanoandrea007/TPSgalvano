<!DOCTYPE html>
<html>
<head>
<title>Caricamento JSON e XML</title>

<style>
body{
  font-family:"Trebuchet MS",sans-serif;
  text-align:center;
  background-color:#e9ecf1;
}

p{
  font-size:22px;
}

button{
  padding:15px 32px;
  font-size:18px;
  margin:20px;
  border:none;
  border-radius:12px;
  background-color:#5c6bc0;
  color:white;
  cursor:pointer;
}

button:hover{
  background-color:#4957a3;
}

.sezione{
  display:none;
  font-family:"Segoe UI",Arial,sans-serif;
  background-color:#f4f6f8;
  padding-top:40px;
}

table{
  margin:20px auto;
  border-collapse:collapse;
  width:80%;
  background:white;
}

th,td{
  border:1px solid #ddd;
  padding:10px;
}

.torna{
  background-color:#0078d7;
  font-size:14px;
  padding:8px 20px;
  margin-bottom:20px;
}
</style>
</head>

<body>

<div id="home" class="sezione" style="display:block;">
<p>Scegli un'opzione:</p>
<button onclick="mostraJSON()">Carica JSON</button>
<button onclick="mostraXML()">Carica XML</button>
</div>

<div id="json" class="sezione">
<button class="torna" onclick="mostraHome()">Torna alla Home</button>
<br>
<input type="file" id="fileJSON" accept=".json">
<button onclick="leggiJSON()">Carica persone.json</button>
<h1>Elenco Persone</h1>
<table>
<thead>
<tr>
<th>Nome</th><th>Cognome</th><th>Indirizzo</th><th>Città</th><th>CAP</th>
</tr>
</thead>
<tbody id="tabellaJSON"></tbody>
</table>
</div>

<div id="xml" class="sezione">
<button class="torna" onclick="mostraHome()">Torna alla Home</button>
<br>
<input type="file" id="fileXML" accept=".xml">
<button onclick="leggiXML()">Carica persone.xml</button>
<h1>Elenco Persone</h1>
<table>
<thead>
<tr>
<th>Nome</th><th>Cognome</th><th>Indirizzo</th><th>Città</th><th>CAP</th>
</tr>
</thead>
<tbody id="tabellaXML"></tbody>
</table>
</div>

<script>
function mostraHome(){
  document.getElementById("json").style.display="none";
  document.getElementById("xml").style.display="none";
  document.getElementById("home").style.display="block";
}

function mostraJSON(){
  document.getElementById("home").style.display="none";
  document.getElementById("xml").style.display="none";
  document.getElementById("json").style.display="block";
}

function mostraXML(){
  document.getElementById("home").style.display="none";
  document.getElementById("json").style.display="none";
  document.getElementById("xml").style.display="block";
}

function leggiJSON(){
  const file=document.getElementById("fileJSON").files[0];
  const url=URL.createObjectURL(file);
  const req=new XMLHttpRequest();
  req.open("GET",url,true);
  req.send();
  req.onload=function(){
    const dati=JSON.parse(req.responseText);
    const tab=document.getElementById("tabellaJSON");
    tab.innerHTML="";
    for(let i=0;i<dati.length;i++){
      let r=tab.insertRow();
      r.insertCell(0).textContent=dati[i].nome;
      r.insertCell(1).textContent=dati[i].cognome;
      r.insertCell(2).textContent=dati[i].indirizzo;
      r.insertCell(3).textContent=dati[i].citta;
      r.insertCell(4).textContent=dati[i].cap;
    }
  }
}

function leggiXML(){
  const file=document.getElementById("fileXML").files[0];
  const url=URL.createObjectURL(file);
  const req=new XMLHttpRequest();
  req.open("GET",url,false);
  req.send();
  const xml=req.responseXML;
  const persone=xml.getElementsByTagName("persona");
  const tab=document.getElementById("tabellaXML");
  tab.innerHTML="";
  for(let i=0;i<persone.length;i++){
    let p=persone[i];
    let r=tab.insertRow();
    r.insertCell(0).textContent=p.getElementsByTagName("nome")[0].textContent;
    r.insertCell(1).textContent=p.getElementsByTagName("cognome")[0].textContent;
    r.insertCell(2).textContent=p.getElementsByTagName("indirizzo")[0].textContent;
    r.insertCell(3).textContent=p.getElementsByTagName("citta")[0].textContent;
    r.insertCell(4).textContent=p.getElementsByTagName("cap")[0].textContent;
  }
}
</script>

</body>
</html>
